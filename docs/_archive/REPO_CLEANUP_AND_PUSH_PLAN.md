# План уборки репозитория и пуша (GitHub, другая машина)

**Цель:** Оставить текущий проект как есть, на русском. Создать **новый** проект копированием репо, затем в копии: убрать data/archive, перевести всё на английский и запушить в GitHub **без истории** (один начальный коммит).

---

## Сценарий: копия → очистка → перевод → новый репо → пуш

- **Текущий проект (эта папка):** Оставить **полностью без изменений**. Ни правок, ни изменений в git. Это ваш полный русский проект с данными и историей.
- **Новый проект:** Отдельная папка (например `eng_words_github` или `eng_words_en`). Создаётся копированием этого проекта; только в копии: удалить исключённые пути, обновить .gitignore, перевести на английский, `git init`, один начальный коммит, пуш в новый репозиторий GitHub. Итог: новый репо без истории.

Шаги ниже (разделы 1–4, 7) относятся **только к новой копии**, не к текущему проекту.

---

## 1. Что ИСКЛЮЧИТЬ в новой копии (не пушить)

| Категория | Пути / шаблоны | Причина |
|-----------|----------------|---------|
| **Данные** | `data/` (всё содержимое) | Parquet, JSONL, книги, результаты экспериментов — архивируете отдельно |
| **Логи и отчёты** | `logs/`, `reports/` | Временные выходы |
| **Архив доков** | `docs/archive/` | Старые планы/результаты; для рефакторинга не нужны |
| **Книги / сырые входы** | `*.epub`, `*.parquet`, `*.csv` (кроме фикстур) | Уже в `.gitignore`; убедиться, что не трекаются |
| **Секреты / env** | `.env`, `known_words.csv` | Уже в `.gitignore` |
| **Большие кэши** | `data/synset_cards/llm_cache/`, `backups/` | Уже в `.gitignore` |
| **Batch-выходы** | `data/experiment/batch/` (requests/results JSONL) | Генерируются; можно перезапустить на другой машине |
| **Gold labels / WSD** | `data/wsd_gold/*.jsonl`, `data/wsd_gold/labels*/`, `data/wsd_gold/batch_*` | Для рефакторинга не нужны; см. ниже |

**В новой копии:** Либо не копировать эти пути при копировании, либо удалить их в копии перед `git init`. Также добавить их в `.gitignore` в копии, чтобы они никогда не коммитились.

**Gold dataset:** Тесты **не** зависят от `data/wsd_gold/` — они используют временные файлы (`tmp_path / "gold.jsonl"`) и данные в памяти. Для рефакторинга нужны только код и описанный формат JSONL; полный gold dataset в репо не обязателен. Если позже понадобится запустить WSD eval на VM (например `evaluate_wsd_on_gold("data/wsd_gold/gold_dev.jsonl", ...)`), скопируйте `gold_dev.jsonl` из бэкапа в `data/wsd_gold/` новой копии после клонирования. Итого: **gold dataset не пушить**; для рефакторинга и прохождения тестов он не требуется.

---

## 2. Что ОСТАВИТЬ в новой копии (пушить в GitHub)

| Категория | Содержимое |
|-----------|------------|
| **Исходники** | `src/eng_words/` (включая `_archive`, если нужен для справки) |
| **Тесты** | `tests/` (и `tests/fixtures/` — оставить мелкие JSON/CSV для тестов) |
| **Скрипты** | `scripts/` (кроме тяжёлых разовых в `_archive` — по желанию оставить/удалить) |
| **Активные доки** | `docs/` **без** `docs/archive/` (см. список ниже) |
| **Конфиг / проект** | `.env.example`, `known_words.csv.example`, `Makefile`, `pyproject.toml`, `uv.lock` |
| **Корневые доки** | `README.md`, `QUICK_START.md`, `QUICK_START_GSHEETS.md`, `START_GENERATION.sh` |
| **Cursor rules** | `.cursor/rules/` (опционально; полезно для AI-рефакторинга) |

**Активные доки для сохранения (затем перевести на английский):**

- `docs/WORD_FAMILY_PIPELINE.md` — основной док по пайплайну/экспериментам  
- `docs/QUALITY_FILTERING_PLAN.md`  
- `docs/REFACTOR_AND_BACKUP_PLAN.md`  
- `docs/DEVELOPMENT_HISTORY.md`  
- `docs/GENERATION_INSTRUCTIONS.md`  
- `docs/LLM_API_KEYS_SETUP.md`  
- `docs/CREDENTIALS_EXPLANATION.md`  
- `docs/GOOGLE_SHEETS_SETUP.md`  
- `docs/WSD_GOLD_DATASET_USAGE.md`  
- `docs/BACKLOG_IDEAS.md`  
- Справка по ценам: `docs/google_pricing.md`, `docs/claude_pricing.md`, `docs/openai_pricing.txt`  

Удалить или не трекать: `docs/archive/` (целиком).

---

## 3. Изменения в .gitignore (добавить/проверить)

Добавить или подтвердить, чтобы перечисленное не коммитилось:

```gitignore
# Данные и сгенерированные выходы (не пушить)
data/
logs/
reports/

# Архив документации (не пушить)
docs/archive/
```

Сохранить существующие игноры: `*.parquet`, `*.csv` (кроме фикстур), `.env`, `*.epub`, `backups/`, `data/synset_cards/llm_cache/` и т.д.

---

## 4. Перевод на английский

### 4.1 Документация (Markdown)

- **README.md** — полный перевод (сейчас смесь RU/EN).  
- **QUICK_START.md**, **QUICK_START_GSHEETS.md** — перевести русские части.  
- **docs/** (все оставленные файлы выше) — перевести на английский:  
  - `WORD_FAMILY_PIPELINE.md` (большая часть на RU),  
  - `QUALITY_FILTERING_PLAN.md`,  
  - `REFACTOR_AND_BACKUP_PLAN.md`,  
  - `DEVELOPMENT_HISTORY.md`,  
  - `GENERATION_INSTRUCTIONS.md`,  
  - `BACKLOG_IDEAS.md`,  
  - и остальные оставленные доки с русским текстом.

Сохранять единообразие терминов (lemma, synset, pipeline, batch API и т.д.).

### 4.2 Docstrings и комментарии в коде

- **src/eng_words/** — все docstrings модулей/классов/функций на английском.  
- Inline-комментарии — на английском.  
- **tests/** — docstrings и комментарии на английском.  
- **scripts/** (не в архиве) — docstrings и комментарии на английском.

Можно делать по шагам: сначала `src/eng_words/` и `docs/`, затем `tests/` и `scripts/`.

---

## 5. Порядок действий (все шаги только в **новой копии**)

1. **Скопировать проект**  
   - Скопировать всю папку проекта в новый каталог (например `../eng_words_github` или `../eng_words_en`).  
   - Папку `.git` **не** копировать (у копии не будет истории).  
   - По желанию: не копировать `data/`, `logs/`, `reports/`, `docs/archive/`, чтобы их в копии не было.

2. **В новой копии: удалить исключённые пути (если они попали в копию)**  
   - Удалить: `data/`, `logs/`, `reports/`, `docs/archive/`.  
   - Оставить: `tests/fixtures/` и при необходимости мелкие тестовые данные в `tests/`.

3. **В новой копии: обновить .gitignore**  
   - Добавить или подтвердить: `data/`, `logs/`, `reports/`, `docs/archive/`.  
   - Сохранить существующие игноры (`*.parquet`, `.env`, `*.epub` и т.д.).

4. **В новой копии: перевести на английский**  
   - Перевести README и корневые Markdown (QUICK_START и т.д.).  
   - Перевести все оставленные доки в `docs/`.  
   - Перевести docstrings и комментарии в `src/`, `tests/` и активных `scripts/`.

5. **В новой копии: создать новый репо и запушить**  
   - `cd <новая-копия>`  
   - `git init`  
   - `git add .`  
   - `git commit -m "Initial commit: English Words pipeline (refactor-ready)"`  
   - Создать новый пустой репозиторий на GitHub (без README, без .gitignore).  
   - `git remote add origin <github-url>`  
   - `git branch -M main`  
   - `git push -u origin main`  

   Итог: один коммит, без истории исходного проекта.

6. **Проверить**  
   - В новой копии: запустить тесты (например `uv run pytest` или `make test`).  
   - После пуша: клонировать новый репо в другое место и убедиться, что доки/код на английском и нет чувствительных или больших файлов.

---

## 6. Пример команды копирования

Из родительской папки текущего проекта:

```bash
# Копировать проект без .git и при необходимости без больших папок
rsync -a --exclude='.git' --exclude='data' --exclude='logs' --exclude='reports' --exclude='docs/archive' /path/to/eng_words /path/to/eng_words_github
```

Или: скопировать папку целиком, затем в копии вручную удалить `.git`, `data/`, `logs/`, `reports/`, `docs/archive/`.  
В копии оставить `tests/fixtures/`, чтобы тесты могли запускаться (мелкие JSON/CSV для тестов).

---

## 7. Чек-лист перед пушем (в новой копии)

- [ ] В `.gitignore` есть `data/`, `logs/`, `reports/`, `docs/archive/`.  
- [ ] В `git status` нет `data/`, `logs/`, `reports/`, `docs/archive/`.  
- [ ] README и все оставленные доки на английском.  
- [ ] Docstrings и комментарии в `src/`, `tests/`, активных `scripts/` на английском.  
- [ ] `.env` и `known_words.csv` не трекаются; примеры (`.example`) — трекаются.  
- [ ] Тесты проходят.  
- [ ] Есть бэкап/архив данных и архивных доков, если они понадобятся на другой машине.

После этого в GitHub пушится **только новая копия** (один начальный коммит, без истории). **Текущий проект** остаётся без изменений, на русском, со всеми данными и историей. Копирование и очистку можно делать на этой машине или на VM; VM может затем выполнить перевод и пуш.
